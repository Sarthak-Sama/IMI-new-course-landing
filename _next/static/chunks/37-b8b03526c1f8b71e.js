"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[37],{493:function(e,t,n){n.r(t),n.d(t,{CREATE_ACCOUNT_ENDPOINTS:function(){return u},GENERIC_ERROR:function(){return i},SIGN_IN_SUCCESS_ENDPOINT:function(){return c},SIGN_UP_ENDPOINT:function(){return r},SIGN_UP_SOCIAL_ENDPOINT:function(){return _},SOCIAL_AUTH_CONFIG:function(){return l},SOCIAL_AUTH_PROVIDER:function(){return a},SUPPORTED_SOCIAL_APP_PROVIDERS:function(){return E}});var o=n(107);let r="".concat("https://contentful-pages-production.herokuapp.com","/api/user-account-signup"),i={sign_up:"Something went wrong.",sign_in:"Something went wrong."},a={FACEBOOK:"Facebook",GOOGLE:"Google",LINKEDIN:"LinkedIn"},E=[a.GOOGLE,a.LINKEDIN,a.FACEBOOK],c="sign-in-success",_="sign-up-social",u=[c,_],l={[a.GOOGLE.toLowerCase()]:{accessTokenUrl:"https://oauth2.googleapis.com/token",authorizationUrl:"https://accounts.google.com/o/oauth2/v2/auth",callbackUrl:"".concat("https://contentful-pages-production.herokuapp.com","/api/auth/callback/google"),clientId:o.env.GOOGLE_CLIENT_ID,clientSecret:o.env.GOOGLE_CLIENT_SECRET,scope:"profile email",userInfoUrl:"https://www.googleapis.com/oauth2/v2/userinfo"},[a.LINKEDIN.toLowerCase()]:{accessTokenUrl:"https://www.linkedin.com/oauth/v2/accessToken",authorizationUrl:"https://www.linkedin.com/oauth/v2/authorization",callbackUrl:"".concat("https://contentful-pages-production.herokuapp.com","/api/auth/callback/linkedin"),clientId:o.env.LINKEDIN_CLIENT_ID,clientSecret:o.env.LINKEDIN_CLIENT_SECRET,emailInfoUrl:"https://api.linkedin.com/v2/emailAddress?q=members&projection=(elements*(handle~))",scope:"r_liteprofile r_emailaddress",userInfoUrl:"https://api.linkedin.com/v2/me"},[a.FACEBOOK.toLowerCase()]:{accessTokenUrl:"https://graph.facebook.com/v12.0/oauth/access_token",authorizationUrl:"https://www.facebook.com/v12.0/dialog/oauth",callbackUrl:"".concat("https://contentful-pages-production.herokuapp.com","/api/auth/callback/facebook"),clientId:o.env.FACEBOOK_CLIENT_ID,clientSecret:o.env.FACEBOOK_CLIENT_SECRET,scope:"public_profile,email",userInfoUrl:"https://graph.facebook.com/me"}}},235:function(e,t,n){n.r(t),n.d(t,{LEAD_BOT_MAP:function(){return r},LOCAL_STORAGE_KEYS:function(){return i},REQUEST_HEADER_KEYS:function(){return o}});let o={QUERY_STRING:"x-custom-query-string",USER_AGENT:"user-agent",X_FORWARED_FOR:"x-forwarded-for",REFERER:"referer",USER_UUID:"user_uuid"},r={"x-bot-score":"bot_score","x-bot-verified":"bot_verified","x-bot-category":"bot_category"},i={LEAD_DETAILS_V1:"leadDetails",LEAD_DETAILS_V2:"ld_snorf",LOCATION:"lxr"}},491:function(e,t,n){n.r(t),n.d(t,{CIPHER_ALGORITHM:function(){return i},CIPHER_METHODS:function(){return E},ENCRYPTION_KEY:function(){return r},INITIALIZATION_VECTOR_LENGTH:function(){return a}});var o=n(107);let r=o.env.ENCRYPTION_KEY||"",i=o.env.ENCRYPTION_CIPHER_ALGORITHM||"aes-256-cbc",a=16,E={ENCRYPT:"encrypt",DECRYPT:"decrypt"}},489:function(e,t,n){n.r(t),n.d(t,{ERROR_CODES:function(){return a},ERROR_MESSAGES:function(){return E},ERROR_TYPE:function(){return r},OPERATION_NAME:function(){return o},PAGE_NAME:function(){return i},REVALIDATE_ACTIONS:function(){return _},REVALIDATE_ERROR:function(){return c},SEVERITY_MESSAGES:function(){return u}});let o={COUNTRY:"COUNTRY_API",UTM_AUDIENCE:"UTM_AUDIENCE_API",PROGRAM:"PROGRAM_API",CONSENT:"CONSENT_API",GA_CONSENT:"GA_CONSENT_API",WORLD_GEO_JSON:"WORLD_GEO_JSON",ENTERPRISE_LEAD:"ENTERPRISE_LEAD_API",GA_LEAD:"GA_LEAD_API",LEAD:"LEAD_API",GA_PROGRAM:"GA_PROGRAM_API",GA_SUBMIT_REFERRAL:"GA_SUBMIT_REFERRAL_API",GA_SEND_INVITES:"GA_SEND_INVITES_API",REVALIDATE:"REVALIDATE",SALES_FORCE_AUTO_FILL:"SALES_FORCE_AUTO_FILL_API",SEND_INVITES:"SEND_INVITES_API",SUBMIT_REFERRAL:"SUBMIT_REFERRAL_API",GENERATE_PURL:"GENERATE_PURL_API",SIGN_IN:"SIGN_IN",SIGN_UP:"SIGN_UP",SOCIAL_SIGN_IN:"SOCIAL_SIGN_IN",IFRAME_LEAD_FORM:"IFRAME_LEAD_FORM",ENCRYPTION_SERVICE:"ENCRYPTION_SERVICE_API",PREVIEW_CONTENTFUL_PAGES:"PREVIEW_CONTENTFUL_PAGES",COLLECTION_PAGE_PROGRAM_CARD:"COLLECTION_PAGE_PROGRAM_CARD",FETCHING_DATA_FOR_EXTERNAL_PROGRAM_CARD:"FETCHING_DATA_FOR_EXTERNAL_PROGRAM_CARD"},r={PAGE_LAYOUT:"PAGE_LAYOUT_ERROR",BOUNDARY:"ERROR_BOUNDARY"},i={LANDING_PAGE:"PROGRAM_LANDING_PAGE",ENTERPRISE_LANDING_PAGE:"ENTERPRISE_PROGRAM_LANDING_PAGE",ELECTIVE_LANDING_PAGE:"ELECTIVE_PROGRAM_LANDING_PAGE",REFERRAL_PAGE:"REFERRAL_PAGE"},a={REFERRAL_API_ERROR_CODE:512,NEW_NODE_API_ERROR_CODE:506,COMPONENT_RENDER_ERROR_CODE:406},E={REFERRAL_API_ERROR_MESSAGE:"Invalid JSON format in error message."},c={REVALIDATE_LANDING_PAGE:"REVALIDATE_LANDING_PAGE"},_={UNPUBLISH:'"ContentManagement.Entry.unpublish"'},u={SEVERITY_NOT_FOUND:"Severity not found"}},492:function(e,t,n){n.r(t),n.d(t,{EMERITUS_LOGO_URL:function(){return o},ERROR_CODES:function(){return i},USER_ACCOUNT_SEARCH_PARAM_SIGN_IN:function(){return r}});let o="".concat("https://d32qmwjzx0jdyj.cloudfront.net","/emeritus_header.png"),r="sign_in",i={SIGN_UP_ERROR:"signUpError",PROGRAM_ERROR:"programError",GENERIC_ERROR:"genericError"}},490:function(e,t,n){n.r(t),n.d(t,{createHiddenInputField:function(){return N},getAuthErrorMessage:function(){return I},getHeaders:function(){return O},getSocialUserDetails:function(){return f},handleAuth:function(){return s},handleSocialAuth:function(){return A},redirectToErrorPage:function(){return R},submitAuthForm:function(){return S}});var o=n(160),r=n(489),i=n(491),a=n(235),E=n(492),c=n(493),_=n(494),u=n(495),l=n(180).Buffer;let R=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",o=arguments.length>3?arguments[3]:void 0,r=t=>{window.location.href="".concat(t).concat(e&&"&code=".concat(e)||"")},i=e===E.ERROR_CODES.SIGN_UP_ERROR;if(t&&n){let e=new URL(n);i&&!o&&e.searchParams.append("screen",E.USER_ACCOUNT_SEARCH_PARAM_SIGN_IN),e.searchParams.delete("code"),r(e.href);return}let a=new URL(window.location.href);i&&!o&&a.searchParams.append("screen",E.USER_ACCOUNT_SEARCH_PARAM_SIGN_IN),a.searchParams.delete("code"),r(a.href)},s=async function(e,t){var n,i,a,u,s,d;let A=arguments.length>2&&void 0!==arguments[2]&&arguments[2],I=arguments.length>3?arguments[3]:void 0,O=JSON.parse(l.from(I,"base64").toString("utf8")),N=null==O?void 0:O.activeExperiments,f=null==O?void 0:O.programSfid,p=null==O?void 0:O.queryString,T=null==O?void 0:O.referringUrl,g=null==O?void 0:O.userAgent,P=null==O?void 0:O.userUUID,v=decodeURIComponent(T),C=null==O?void 0:O.schoolHostOrigin,h=null==O?void 0:O.isGaPage,L={...e};if(N){let[e,t]=N.split(":");L={...L,active_experiments:{[e]:t}}}P&&(L={...L,user_uuid:P}),f&&(L={...L,program_sfid:f});try{if(t===r.OPERATION_NAME.SIGN_IN){S(L,C,v,g,p,h);return}if(t===r.OPERATION_NAME.SIGN_UP&&!e.program_sfid)return R(E.ERROR_CODES.PROGRAM_ERROR,A,v,h);{let e=await o.default.post("".concat(c.SIGN_UP_ENDPOINT,"?state=").concat(I),L,{headers:{"Content-Type":"text/plain"}});200===e.status?window.location.href=null==e?void 0:null===(n=e.data)||void 0===n?void 0:n.location:((0,_.apiErrorLogger)(t,null==e?void 0:null===(i=e.data)||void 0===i?void 0:i.error,P?"User UUID: ".concat(P):""),R(null==e?void 0:null===(a=e.data)||void 0===a?void 0:a.code,A,v,h))}}catch(e){(0,_.apiErrorLogger)(t,(null==e?void 0:null===(u=e.response)||void 0===u?void 0:u.data)||e,P?"User UUID: ".concat(P):""),R((null==e?void 0:null===(d=e.response)||void 0===d?void 0:null===(s=d.data)||void 0===s?void 0:s.code)||E.ERROR_CODES.GENERIC_ERROR,A,v,h)}},d=async e=>{var t;let n={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:i.CIPHER_METHODS.DECRYPT,encryptedText:e})},o=await fetch((0,u.getEncryptionServiceEnpoint)(),n),r=await o.text();return Object.fromEntries(new URLSearchParams(await (null===(t=JSON.parse(r))||void 0===t?void 0:t.decryptedText)).entries())},A=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:r.OPERATION_NAME.SIGN_UP,n=arguments.length>2?arguments[2]:void 0,o=arguments.length>3?arguments[3]:void 0,i="";try{let a=await d(e),E=l.from(n,"base64").toString("utf8"),c=JSON.parse(E);i=c.userUUID;let{email:_,first_name:u,last_name:R,auth_provider:A,auth_provider_uuid:I}=a,O=t===r.OPERATION_NAME.SIGN_UP?{user:{email:_,first_name:u,last_name:R,auth_provider:A,uuid:I,auth_provider_uuid:void 0,country:o},program_sfid:c.programSfid}:{email:_,auth_provider:A,auth_provider_uuid:I};s(O,t,!0,n)}catch(e){(0,_.apiErrorLogger)(t,e,i?"User UUID: ".concat(i):"")}},I=(e,t)=>(null==e?void 0:e.message)?e.message:(null==e?void 0:e.code)?t(e.code):"",O=e=>{let t={};return e&&((null==e?void 0:e.queryString)&&(t[a.REQUEST_HEADER_KEYS.QUERY_STRING]=null==e?void 0:e.queryString.slice(1)),(null==e?void 0:e.userAgent)&&(t[a.REQUEST_HEADER_KEYS.USER_AGENT]=null==e?void 0:e.userAgent),(null==e?void 0:e.xFFHeader)&&(t[a.REQUEST_HEADER_KEYS.X_FORWARED_FOR]=null==e?void 0:e.xFFHeader),(null==e?void 0:e.referer)&&(t[a.REQUEST_HEADER_KEYS.REFERER]=null==e?void 0:e.referer)),t},N=(e,t,n)=>{let o=document.createElement("input");o.type="hidden",o.name=e,o.value=t,n.appendChild(o)},S=function(e,t,n,o,r){let i=arguments.length>5&&void 0!==arguments[5]&&arguments[5],a=document.createElement("form");a.method="POST";let E=["user_uuid","program_sfid"];for(let n of(a.action=(0,u.getEESignInUrl)(i,t),Object.keys(e)))if("active_experiments"===n){let[[t,o]]=Object.entries(e[n]);N("active_experiments[".concat(t,"]"),"".concat(o),a)}else N(E.includes(n)?n:"user[".concat(n,"]"),e[n]||"",a);n&&N("referer",n,a),o&&N("user_agent",o,a),r&&N("query_string",r,a),N("external_authenticity_token","deb0b97b1754d4db1a6f3d1c4a637b8a",a),document.body.appendChild(a),a.submit()},f=async(e,t,n)=>{let{callbackUrl:i,clientId:a,clientSecret:E,accessTokenUrl:u,userInfoUrl:l,emailInfoUrl:R}=e&&c.SOCIAL_AUTH_CONFIG[e]||{},s=null;try{let n=(await o.default.post(u,null,{params:{grant_type:"authorization_code",code:t,client_id:a,client_secret:E,redirect_uri:i}})).data.access_token,r=await o.default.get(l,{headers:{Authorization:"Bearer ".concat(n)},...e===c.SOCIAL_AUTH_PROVIDER.FACEBOOK.toLowerCase()?{params:{fields:"id,name,email"}}:{}});return e===c.SOCIAL_AUTH_PROVIDER.LINKEDIN.toLowerCase()&&(s=await o.default.get(R,{headers:{Authorization:"Bearer ".concat(n)}})),{...r.data,...s?{email:s.data.elements[0]["handle~"].emailAddress}:{}}}catch(t){return(0,_.apiErrorLogger)("".concat(r.OPERATION_NAME.SOCIAL_SIGN_IN,":").concat(e),t,n?"User UUID: ".concat(n):""),t}}},494:function(e,t,n){n.r(t),n.d(t,{apiErrorLogger:function(){return r},apiInfoLogger:function(){return i},pageViewLogger:function(){return a}});var o=n(489);let r=function(e,t){var n,r,i,a,E;let c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",{error:_,code:u,response:l,statusCode:R}=t,s=o.ERROR_CODES.NEW_NODE_API_ERROR_CODE,d=null!==(n=null!=R?R:null==l?void 0:l.status)&&void 0!==n?n:s,A=null!==(i=null!==(r=null==_?void 0:_.code)&&void 0!==r?r:u)&&void 0!==i?i:s,I=null!==(a=null==_?void 0:_.message)&&void 0!==a?a:"No message available",O=null!==(E=null==_?void 0:_.severity)&&void 0!==E?E:o.SEVERITY_MESSAGES.SEVERITY_NOT_FOUND;console.error("Failed Service Name: ".concat(e," Type: ").concat(A," Status: ").concat(d," Severity: ").concat(O," Message: ").concat(I," ").concat(c||""))},i=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";console.info("Service Name: ".concat(e," ").concat(t?"Message : ".concat(t):""))},a=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";console.log("Page Name: ".concat(e," School Domain : ").concat(t," Slug : ").concat(n))}},495:function(e,t,n){n.r(t),n.d(t,{getAuthServiceEndpoint:function(){return c},getEESignInUrl:function(){return l},getEncryptionServiceEnpoint:function(){return _},getImplicitConsentText:function(){return a},getSuccessPageUrl:function(){return u},serializeQueryParams:function(){return E}});var o=n(160),r=n(491),i=n(493);let a=(e,t)=>{let n="<a href=".concat(e("termsOfServiceLink"),' target="_blank">').concat(e("termsOfService"),"</a>"),o="<a href=".concat(e("privacyPolicyLink"),' target="_blank">').concat(e("privacyPolicy"),"</a>");return e("implicitConsentText",{buttonLabel:t,termsOfService:n,privacyPolicy:o})},E=e=>"object"!=typeof e||null===e?"":Object.entries(e).filter(e=>e[1]).map(e=>"".concat(encodeURIComponent(e[0]),"=").concat(encodeURIComponent(e[1]))).join("&"),c=function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return e?"https://signin.globalalumni.org":"https://signin.emeritus.org"},_=function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return"".concat(c(e),"/api/encryption-service")},u=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2?arguments[2]:void 0,a=arguments.length>3?arguments[3]:void 0,u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"",R=arguments.length>6&&void 0!==arguments[6]&&arguments[6],s=arguments.length>7?arguments[7]:void 0,d=arguments.length>8&&void 0!==arguments[8]&&arguments[8];try{let A=(await o.default.post(_(d),{action:r.CIPHER_METHODS.ENCRYPT,text:E({[R?"email":"user[email]"]:e,[R?"password":"user[password]"]:t,[R?"auth_provider":"user[auth_provider]"]:n===i.SOCIAL_AUTH_PROVIDER.GOOGLE.toLowerCase()?"google_oauth2":n,[R?"auth_provider_uuid":"user[auth_provider_uuid]"]:a,[R?"first_name":"user[first_name]"]:u,[R?"last_name":"user[last_name]"]:l})})).data.encryptedText;return{successEndpoint:"".concat(c(d),"/auth/").concat(R?i.SIGN_UP_SOCIAL_ENDPOINT:i.SIGN_IN_SUCCESS_ENDPOINT,"?encrypted_attributes=").concat(A,"&state=").concat(s),error:null}}catch(e){return{error:e}}},l=function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];let e=arguments.length>1?arguments[1]:void 0;return"".concat(e,"/users/sign_in")}}}]);